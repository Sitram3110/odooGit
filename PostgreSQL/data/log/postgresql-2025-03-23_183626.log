2025-03-23 18:36:26 +07 LOG:  database system was shut down at 2025-03-23 18:35:54 +07
2025-03-23 18:41:26 +07 LOG:  checkpoint starting: time
2025-03-23 18:41:26 +07 LOG:  checkpoint complete: wrote 2 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.003 s, sync=0.001 s, total=0.011 s; sync files=1, longest=0.001 s, average=0.001 s; distance=0 kB, estimate=0 kB; lsn=0/B1135B8, redo lsn=0/B113560
2025-03-23 18:42:10 +07 ERROR:  could not serialize access due to concurrent update
2025-03-23 18:42:10 +07 STATEMENT:  
	                WITH visitor AS (
	                    
	            INSERT INTO website_visitor (
	                partner_id, access_token, last_connection_datetime, visit_count, lang_id,
	                website_id, timezone, write_uid, create_uid, write_date, create_date, country_id)
	            VALUES (
	                3, 3, now() at time zone 'UTC', 1, 1,
	                1, 'Asia/Saigon', 2, 2,
	                now() at time zone 'UTC', now() at time zone 'UTC', (
	                    SELECT id FROM res_country WHERE code = NULL
	                )
	            )
	            ON CONFLICT (access_token)
	            DO UPDATE SET
	                last_connection_datetime=excluded.last_connection_datetime,
	                visit_count = CASE WHEN website_visitor.last_connection_datetime < NOW() AT TIME ZONE 'UTC' - INTERVAL '8 hours'
	                                    THEN website_visitor.visit_count + 1
	                                    ELSE website_visitor.visit_count
	                                END
	            RETURNING id, CASE WHEN create_date = now() at time zone 'UTC' THEN 'inserted' ELSE 'updated' END AS upsert
	        , 'http://localhost:8069/shop/laptop-lenovo-thinkpad-x1-carbon-g12-2' AS url, NULL AS page_id
	                ), track AS (
	                    INSERT INTO website_track (visitor_id, url, page_id, visit_datetime)
	                    SELECT id, url, page_id::integer, now() at time zone 'UTC' FROM visitor
	                )
	                SELECT id, upsert from visitor;
	                
2025-03-23 18:46:26 +07 LOG:  checkpoint starting: time
2025-03-23 18:46:29 +07 LOG:  checkpoint complete: wrote 36 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=3.519 s, sync=0.013 s, total=3.537 s; sync files=28, longest=0.002 s, average=0.001 s; distance=127 kB, estimate=127 kB; lsn=0/B133460, redo lsn=0/B133408
2025-03-23 18:51:26 +07 LOG:  checkpoint starting: time
2025-03-23 18:51:27 +07 LOG:  checkpoint complete: wrote 10 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.975 s, sync=0.006 s, total=0.986 s; sync files=10, longest=0.001 s, average=0.001 s; distance=30 kB, estimate=117 kB; lsn=0/B13AF08, redo lsn=0/B13AEB0
2025-03-23 18:56:26 +07 LOG:  checkpoint starting: time
2025-03-23 18:56:28 +07 LOG:  checkpoint complete: wrote 16 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=1.398 s, sync=0.007 s, total=1.412 s; sync files=12, longest=0.002 s, average=0.001 s; distance=55 kB, estimate=111 kB; lsn=0/B148E38, redo lsn=0/B148DE0
2025-03-23 19:06:26 +07 LOG:  checkpoint starting: time
2025-03-23 19:06:28 +07 LOG:  checkpoint complete: wrote 25 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=2.624 s, sync=0.011 s, total=2.638 s; sync files=24, longest=0.001 s, average=0.001 s; distance=80 kB, estimate=108 kB; lsn=0/B15D088, redo lsn=0/B15D030
2025-03-23 19:21:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:21:27 +07 LOG:  checkpoint complete: wrote 10 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.762 s, sync=0.006 s, total=0.772 s; sync files=10, longest=0.001 s, average=0.001 s; distance=30 kB, estimate=100 kB; lsn=0/B164B18, redo lsn=0/B164AC0
2025-03-23 19:26:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:26:28 +07 LOG:  checkpoint complete: wrote 10 buffers (0.1%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.762 s, sync=0.006 s, total=0.772 s; sync files=10, longest=0.001 s, average=0.001 s; distance=30 kB, estimate=93 kB; lsn=0/B16C5F8, redo lsn=0/B16C5A0
2025-03-23 19:41:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:41:35 +07 LOG:  checkpoint complete: wrote 71 buffers (0.4%); 0 WAL file(s) added, 0 removed, 0 recycled; write=7.574 s, sync=0.028 s, total=7.605 s; sync files=65, longest=0.001 s, average=0.001 s; distance=115 kB, estimate=115 kB; lsn=0/B18EF08, redo lsn=0/B189360
2025-03-23 19:46:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:46:35 +07 LOG:  checkpoint complete: wrote 73 buffers (0.4%); 0 WAL file(s) added, 0 removed, 0 recycled; write=7.781 s, sync=0.019 s, total=7.803 s; sync files=44, longest=0.001 s, average=0.001 s; distance=323 kB, estimate=323 kB; lsn=0/B1DA170, redo lsn=0/B1DA0E0
2025-03-23 19:51:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:51:31 +07 LOG:  checkpoint complete: wrote 46 buffers (0.3%); 0 WAL file(s) added, 0 removed, 0 recycled; write=4.848 s, sync=0.016 s, total=4.868 s; sync files=35, longest=0.001 s, average=0.001 s; distance=165 kB, estimate=307 kB; lsn=0/B209778, redo lsn=0/B2037B8
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:10 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:27 +07 LOG:  checkpoint starting: time
2025-03-23 19:56:30 +07 LOG:  checkpoint complete: wrote 26 buffers (0.2%); 0 WAL file(s) added, 0 removed, 0 recycled; write=2.501 s, sync=0.009 s, total=2.514 s; sync files=21, longest=0.002 s, average=0.001 s; distance=92 kB, estimate=286 kB; lsn=0/B21A8B0, redo lsn=0/B21A858
2025-03-23 19:56:53 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:53 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:53 +07 LOG:  could not receive data from client: An existing connection was forcibly closed by the remote host.
	
2025-03-23 19:56:55 +07 ERROR:  canceling statement due to user request
2025-03-23 19:56:55 +07 LOG:  shutting down
2025-03-23 19:56:55 +07 LOG:  checkpoint starting: shutdown immediate
2025-03-23 19:56:55 +07 LOG:  checkpoint complete: wrote 0 buffers (0.0%); 0 WAL file(s) added, 0 removed, 0 recycled; write=0.001 s, sync=0.001 s, total=0.005 s; sync files=0, longest=0.000 s, average=0.000 s; distance=0 kB, estimate=257 kB; lsn=0/B21A960, redo lsn=0/B21A960
